%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%{{{
% Structured General Purpose Assignment
% LaTeX Template
%
% This template has been downloaded from:
% http://www.latextemplates.com
%
% Original author:
% Ted Pavlic (http://www.tedpavlic.com)
%
% Note:
% The \lipsum[#] commands throughout this template generate dummy text
% to fill the template out. These commands should all be removed when 
% writing assignment content.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[12pt,a4paper]{article}

\usepackage{fancyhdr} % Required for custom headers
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage{hyperref}
\usepackage{hyperref}
\usepackage{float}
\usepackage{lastpage} % Required to determine the last page for the footer
\usepackage{extramarks} % Required for headers and footers
\usepackage{graphicx} % Required to insert images
\usepackage{lipsum} % Used for inserting dummy 'Lorem ipsum' text into the template

% Margins
\topmargin=-0.45in
\evensidemargin=0in
\oddsidemargin=0in
\textwidth=6.5in
\textheight=9.0in
\headsep=0.25in 

\linespread{1.1} % Line spacing

% Set up the header and footer
\pagestyle{fancy}
\lhead{\hmwkTitle} % Top left header
\rhead{\firstxmark} % Top right header
\lfoot{\lastxmark} % Bottom left footer
\cfoot{} % Bottom center footer
\rfoot{Page\ \thepage\ de\ \pageref{LastPage}} % Bottom right footer
\renewcommand\headrulewidth{0.4pt} % Size of the header rule

\renewcommand\footrulewidth{0.4pt} % Size of the footer rule

\setlength\parindent{0pt} % Removes all indentation from paragraphs

%----------------------------------------------------------------------------------------
%	DOCUMENT STRUCTURE COMMANDS
%	Skip this unless you know what you're doing
%----------------------------------------------------------------------------------------

% Header and footer for when a page split occurs within a problem environment
\newcommand{\enterProblemHeader}[1]{
\nobreak\extramarks{#1}{#1 continue \ldots}\nobreak
\nobreak\extramarks{#1 (suite)}{#1 continue \ldots}\nobreak
}

% Header and footer for when a page split occurs between problem environments
\newcommand{\exitProblemHeader}[1]{
\nobreak\extramarks{#1 (continued)}{#1 continued on next page\ldots}\nobreak
\nobreak\extramarks{#1}{}\nobreak
}

\setcounter{secnumdepth}{0} % Removes default section numbers
\newcounter{homeworkProblemCounter} % Creates a counter to keep track of the number of problems
\newcounter{homeworkQuestionCounter} % Creates a counter to keep track of the number of problems

\newcommand{\homeworkProblemName}{}
\newenvironment{homeworkProblem}[1][Problem \arabic{homeworkProblemCounter}]{ % Makes a new environment called homeworkProblem which takes 1 argument (custom name) but the default is "Problem #"
\stepcounter{homeworkProblemCounter} % Increase counter for number of problems
\renewcommand{\homeworkProblemName}{#1} % Assign \homeworkProblemName the name of the problem
\section{\homeworkProblemName} % Make a section in the document with the custom problem count
\enterProblemHeader{\homeworkProblemName} % Header and footer within the environment
}{
\exitProblemHeader{\homeworkProblemName} % Header and footer after the environment
\setcounter{homeworkQuestionCounter}{0} % Removes default section numbers
}

\newcommand{\problemAnswer}[1]{ % Defines the problem answer command with the content as the only argument
\noindent\framebox[\columnwidth][c]{\begin{minipage}{0.98\columnwidth}#1\end{minipage}} % Makes the box around the problem answer and puts the content inside
}

\newcommand{\homeworkSectionName}{}
\newenvironment{homeworkSection}[1]{ % New environment for sections within homework problems, takes 1 argument - the name of the section
\stepcounter{homeworkQuestionCounter} % Increase counter for number of problems
\renewcommand{\homeworkSectionName}{\arabic{homeworkProblemCounter} . \arabic{homeworkQuestionCounter} #1} % Assign \homeworkSectionName to the name of the section from the environment argument
\subsection{\homeworkSectionName} % Make a subsection with the custom name of the subsection
\enterProblemHeader{\homeworkProblemName\ [\homeworkSectionName]} % Header and footer within the environment
}{
\enterProblemHeader{\homeworkProblemName} % Header and footer after the environment
}
   
%----------------------------------------------------------------------------------------
%	NAME AND CLASS SECTION
%----------------------------------------------------------------------------------------

\newcommand{\hmwkTitle}{TP2} % Assignment title
\newcommand{\hmwkDueDate}{Mardi\ 16 Février\ 2016} % Due date
\newcommand{\hmwkClass}{INF6422} % Course/class
\newcommand{\hmwkClassTime}{12h} % Class/lecture time
\newcommand{\hmwkClassInstructor}{François Labrèche} % Teacher/lecturer
\newcommand{\hmwkAuthorName}{Philippe Troclet (1815208) et Alexandre Mao (1813566)} % Your name

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

\title{
\vspace{2in}
\textmd{\textbf{\hmwkClass:\ \hmwkTitle}}\\
\normalsize\vspace{0.1in}\small{pour\ le\ \hmwkDueDate}\\
\vspace{3in}
}

\author{\textbf{\hmwkAuthorName}}
\date{} % Insert date here if you want it to appear below your name

%----------------------------------------------------------------------------------------

\begin{document}

\maketitle

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTS
%----------------------------------------------------------------------------------------

%\setcounter{tocdepth}{1} % Uncomment this line if you don't want subsections listed in the ToC

\newpage
\tableofcontents
\newpage%}}}

%Pour mettre des images
%\begin{figure}[H]
    %\begin{center}
	%\includegraphics{Images/} 
        %\caption{Légende}
        %\label{fig:reference}
    %\end{center}
%\end{figure}

%----------------------------------------------------------------------------------------
%	Première partie
%----------------------------------------------------------------------------------------

\begin{homeworkProblem}[\arabic{homeworkProblemCounter} Méthode statistique] % Custom section title

\begin{homeworkSection}{Régression logitique} % Section within problem 
    On procède à une régression logistique en allant dans l'onglet "classify" puis en sélectionnant "logistic" dans le menu
functions".  En laissant sa souris sur le champ "percentage split", l'aide apparaît et nous informe que cette option nous permet
de choisir de choisir le pourcentage qui sera utilisé pour entraîner le modèle, tandis que le pourcentage restant des données
permettra de tester le modèle ainsi créé. Ainsi, les $33\%$ restants serviront à tester le modèle conçu à partir de la phase
d'apprentisage.  

\begin{table}
    \begin{center}
        \resizebox{!}{.35\paperheight}{
        \input{Tableau/coefficients.tex} 
    }
        \caption{Les coefficients pour les différentes variables}
        \label{tab:coeflogit}
    \end{center}
\end{table}

\begin{table}
    \begin{center}
        \resizebox{!}{.35\paperheight}{
        \input{Tableau/oddRatio.tex} 
    }
        \caption{Les odd Ratio des différentes variables}
        \label{tab:oddRatiologit}
    \end{center}
\end{table}

Sur les tableaux \ref{tab:coeflogit} et \ref{tab:oddRatiologit}, on peut voir (dans cet ordre) les coefficients et les odd ratio
obtenus via la régression logistique. Il convient d'expliquer le sens de ces valeurs.
Rappelons que la régression logistique repose sur l'hypothèse que la valeur $\log{\frac{P(Y=1|X)}{1-P(Y=1|X)}}$ (où $Y$ caractérise si le
mail est du spam, c'est la variable dépendante et X est l'ensemble des variables dépendantes), peut s'écrire comme une
combinaisons affine des différentes variables indépendantes (il s'agit ici des fréquences des différents mots) i.e on a une
relation de la forme:
\[
    \log{\frac{P(Y=1|X)}{1-P(Y=1|X)}} =  \alpha_0 + \sum_{i = 1}^{i = N} \alpha_i \cdot x_i
\]
Dans cette équation, les $ \alpha_i$ sont les coefficients de la régression. De manière générale, pour un événement de probabilité
$p$, l'odd associé est $\frac{p}{1-p}$. L'odd ratio est alors le ratio de deux odd celui associé à la probabilité qu'un événement
1 se produise sachant qu'un ordre événement 2 s'est produit, sur celui que l'événement 2 ne se produise pas. Dans le cas présent,
l'odd ratio associé à une variable indépendante est l'exponentielle
du coefficient de cette même variable dans la régression logistique. On distingue en général trois cas de figure:
\begin{enumerate}
        \item $odd ratio = 1$ la variable est indépendante du phénomène
        \item $odd ratio < 1$ dès que la variable augmente, la probabilité que $Y=1$ diminue
        \item $odd ratio > 1$ dès que la variable augmente, la probabilité que $Y=1$ augmente
\end{enumerate}
(Ces résultats sont des propriétés de la régression logistique). 
Ainsi, on peut voir qu'un mail possédant les mots \textit{conference} et \textit{meeting} a peu de chance d'être un spam alors
qu'un mail contenant le mot \textit{order} ou \textit{adresses} a plus de chance d'être du spam.

\end{homeworkSection}

%--------------------------------------------

\begin{homeworkSection}{Etude du Modèle} % Section within problem

Pour notre modèle de régression linéaire, on a : 
\begin{itemize} 
    \item Un taux de vrai positif de 0.891 pour les spams et un taux de vrai positif de 0.954 pour les mails non-spam (la moyenne
étant de 0.929). Le taux de vrai positif représente les mails qui ont été déclaré comme appartenant à une certaine catégorie et
qui appartienne réellement à cette catégorie.
    \item Un taux de faux positifs désigne la proportion de mails d'une catégorie qui a été désignée à tort comme appartenant à
cette catégorie. Dans le cas présent, on a un taux de faux positif de 0.046 pour les spam et de 0.0109 pour les mails normaux.
    \item La précision mesure à quel point le résultat d'estimateur devrait être proche de
la valeur à estimer. (C'est-à-dire quelles sont les chances pour un mail identifié comme appartenent à une catégorie de
réellement appartenir à une catégorie). Ici, elle se calcule en divisant le nombre de mails qui appartiennent réellement à une catégorie par le
nombre de mails dont le test estime qu'ils appartiennent à cette catégorie. On a une précision de 0.926 pour les spams et de 0.931 pour les mails
normaux  soit une moyenne de 0.929. 
    \item La sensibilité est le nombre de mails correctement identifiés d'une catégorie sur le cardinal de cette catégorie. La
sensibilité mesure donc à quel point les résultats sont proches de la réalité (Le nombre de mails identifié comme membre
d'une catégorie est proche du nombre réel). Une sensibilité (recall) de 0.891 pour les spam de
0.954 pour les mails classiques, ce qui donne une moyenne de  0.929. On remarque que la sensibilité a les mêmes valeurs que les
true positives 
    \item La F-measure se calcule par la formule $2 \cdot \frac{recall * precision}{recall +
precision}$. Ici elle vaut pour le spam (respectivement pour les mails normaux) 0.908 (respectivement 0.942. Cette valeur
sert principalement de métrique pour comparer les performances de différents algorithmes, plus sa valeur est élevée plus
l'algorithme est supposé performant. En revanche, il n'y a pas vraiment d'interprétation pratique de cette valeur.
    \item une aire sous la courbe (ROC area) de 0.971. Cette valeur mesure la performance de notre modèle. Elle désigne l'aire
sous la courbe lorsque l'on trace le taux de vrais positifs en fonction de taux de faux positifs pour un classificateur
donné (dans le cas présent on peut prendre une valeur seuil de la fréquence de certains mots). L'idée est que plus cette valeur
est élevée meilleur est le test. En effet, plus cette valeur est élevée, plus la courbe s'éloige de la droite identité et donc
plus elle se rapproche du point (0,1) quo caractèrise un test parfait.
%A voir https://fr.wikipedia.org/wiki/Receiver_Operating_Characteristic
        \item La matrice de confusion est visible sur le tableau \ref{tab:matrix}, les deux premières colonnes caractérisent les
résultats obtenus lors des tests. La première colonne correspond aux mails détectés comme spam, tandis que la seconde correspond
aux mails normaux. La première ligne représente les mails étant réellement du spam, tandis que la seconde caractérise les mails
légitimes.
\begin{table}
    \begin{center}
        \input{Tableau/matrix.tex} 
        \caption{Matrice de confusion}
        \label{tab:matrix}
    \end{center}
\end{table}
\end{itemize} 


\end{homeworkSection}

\begin{homeworkSection}{Tokenization attack} Un exemple de contre-mesure de type Tokenization attack qu'un spammeur pourrait
    facilement utiliser afin de contourner un filtre basé uniquement sur la fréquence d'apparition de certains mots est de
    permuter la place de certaines lettres dans certains mots, ou de créer de manière volontaire des fautes d'orthographes qui
    n'altéreront pas la signification du texte.  Pour le message suivant nous pourrions avoir le résultat :

DEAR RECEIVER,

You have just recieved a Talban virus. Since we are not so technlogoicaly advanced in Afganistan, this is a MANUAL vrus. Please
click on this lnk(http://clickeme.com) to delte all the files on your hard disk and send this mal to everyone you know. 
%voir article http://nlp.stanford.edu/IR-book/html/htmledition/tokenization-1.html
\end{homeworkSection}
%--------------------------------------------

\end{homeworkProblem}

%---------------------------------------------------------------------------------------- PROBLEM 3
%----------------------------------------------------------------------------------------

\begin{homeworkProblem}[\arabic{homeworkProblemCounter} Apprentissage automatique] % Roman numerals 
    Parmi les méthodes d'apprentissage automatique les plus courantes, nous avons : 
\begin{itemize} 
    \item l'apprentissage non-supervisé ("clustering")
            est un apprentissage automatique. Il s'agit pour un logiciel de diviser un groupe hétérogène de données, en
            sous-groupes de manière que les données considérées comme les plus similaires soient associées au sein d'un groupe
            homogène et qu'au contraire les données considérées comme différentes se retrouvent dans d'autres groupes distincts ;
            l'objectif étant de permettre une extraction de connaissance organisée à partir de ces données %définition de
            wikipédia %\url{https://fr.wikipedia.org/wiki/Apprentissage_non_supervis%C3%A9} 
            \item L'apprentissage semi-supervisé est un
            apprentissage.  L'apprentissage semi-supervisé est une classe de techniques d'apprentissage automatique qui utilise un
            ensemble de données étiquetées et non-étiquetés. Il se situe ainsi entre l'apprentissage supervisé qui n'utilise que
            des données étiquetées et l'apprentissage non-supervisé qui n'utilise que des données non-étiquetées. Il a été
            démontré que l'utilisation de données non-étiquetées, en combinaison avec des données étiquetées, permet d'améliorer
            significativement la qualité de l'apprentissage. Un autre intérêt provient du fait que l'étiquetage de données
            nécessite l'intervention d'un utilisateur humain. Lorsque les jeux de données deviennent très grands, cette opération
            peut s'avérer fastidieuse. Dans ce cas, l'apprentissage semi-supervisé, qui ne nécessite que quelques étiquettes,
            revêt un intérêt pratique évident. %wikipédia https://fr.wikipedia.org/wiki/Apprentissage_semi-supervis%C3%A9 
        \item L'apprentissage supervisé ("supervised learning")est une technique d'apprentissage automatique où l'on cherche à
            produire automatiquement des règles à partir d'une base de données d'apprentissage contenant des « exemples » (en
            général des cas déjà traités et validés). %wikipédia https://fr.wikipedia.org/wiki/Apprentissage_supervis%C3%A9
    \end{itemize}
%--------------------------------------------

\begin{homeworkSection}{Caractéristiques des méthodes} % Using the problem name elsewhere 
\end{homeworkSection}

%--------------------------------------------

\begin{homeworkSection}{Classification naïve bayésienne} Pour notre modèle de classification naïve bayésienne, on a :
\begin{itemize} 
    \item Un taux de vrai positif de 0.945 pour les spams et un taux de vrai positif de 0.673 pour les mails non-spam
            (la moyenne étant de 0.78), le taux de vrai positif. Il représente les taux de mails qui ont été considéré comme étant
            des spams et qui sont réellement des mails 
        \item un taux de faux positif de 0.327 qui est le taux de mail considérés
            comme des spams mais à tort. Et un taux de faux positif de 0.0055 pour les mails considérés comme des non-spams alors
        qu'ils le sont. moyenne de 0.163 
    \item une précision de (0.653 pour les spams/0.949 pour les mails normaux) 0.832 de
            moyenne.  La précision correspond au rapport entre le nombre de mails détecté comme des spams et qui le sont
            effectivement, sur le nombre total de mail qui sont des spams pour la première valeur. Pour la seconde c'est la même
            chose mais avec les mails qui ne sont pas des spams.  La moyenne se fait donc sur le nombre de mails qui ont été bien
        catégorisé sur le nombre total de mail.  
    \item une sensibilité (recall) de (0.945/0.673) 0.78. On remarque que la
        sensibilité a les mêmes valeurs que les true positives 
    \item un F-measure de (0.772/0.787) 0.781. Ces valeurs ont l'air
            d'être la moyenne entre la précision et la sensibilité. %définition à revoir 
        \item une aire sous la courbe (ROC area)
        de 0.935. Cette valeur mesure la performance de notre modèle 
    \item On a pour matrice de confusion : {{583, 34}, {310,
            637}}, avec la première ligne a = 1, première colonne a, deuxième ligne b=2 et colonne b.
%A voir https://fr.wikipedia.org/wiki/Receiver_Operating_Characteristic
Comparativement au précédent modèle, ce que nous pouvons voir, c'est qu'au niveau des moyenne, ce modèle à des résultats moins bon
que le modèle avec la régression linéaire malgré le fait qu'il détecte mieux les spams, il détecte en revanche un part très
importante des mails normaux comme des spams (1/3 environ), ce qui n'est pas une bonne chose du tout et pourrait être
préjudiciable aux utilisateurs \end{itemize} \end{homeworkSection}

\begin{homeworkSection}{Les arbres décisionnels} Pour notre modèle de random forest, on a : \begin{itemize} \item Un taux de vrai
            positif de 0.927 pour les spams et un taux de vrai positif de 0.963 pour les mails non-spam (la moyenne étant de
            0.949), le taux de vrai positif. Il représente les taux de mails qui ont été considéré comme étant des spams et qui
            sont réellement des mails \item un taux de faux positif de 0.037 qui est le taux de mail considérés comme des spams
            mais à tort. Et un taux de faux positif de 0.073 pour les mails considérés comme des non-spams alors qu'ils le sont.
        moyenne de 0.059 \item une précision de (0.927 pour les spams/0.963 pour les mails normaux) 0.949 de moyenne.  La
            précision correspond au rapport entre le nombre de mails détecté comme des spams et qui le sont effectivement, sur le
            nombre total de mail qui sont des spams pour la première valeur. Pour la seconde c'est la même chose mais avec les
            mails qui ne sont pas des spams.  La moyenne se fait donc sur le nombre de mails qui ont été bien catégorisé sur le
        nombre total de mail.  \item une sensibilité (recall) de (0.927/0.963) 0.949. On remarque que la sensibilité a les mêmes
        valeurs que les true positives \item un F-measure de (0.935/0.958) 0.949. Ces valeurs ont l'air d'être la moyenne entre la
            précision et la sensibilité. %définition à revoir \item une aire sous la courbe (ROC area) de 0.987. Cette valeur
        mesure la performance de notre modèle \item On a pour matrice de confusion : {{572, 45}, {35, 912}}, avec la première
            ligne a = 1, première colonne a, deuxième ligne b=2 et colonne b.
%A voir https://fr.wikipedia.org/wiki/Receiver_Operating_Characteristic
Comparativement aux deux précédents modèles, ce que nous pouvons voir, est que les valeurs pour les différents élément sont toutes
meilleures. Nous pouvons donc en déduire que ce modèle est préférable 
\end{itemize} 
\end{homeworkSection}

\begin{homeworkSection}{Contre-mesures \textit{Satistical}} Un exemple de contre-mesure de type Statistical attack qu'un spammeur
    pourrait utiliser afin d'échapper à un filtre basé sur la fréquence des mots en utilisant une méthode d'apprentissage
    automatique est l'utilisation de synonymes pour les mots, cela abaisserait la fréquence des mots qui sont considérés comme
    très présent dans les spams. % A compléter Une solution qui permettrait de contrecarrer cette contre-mesure est : ....
\end{homeworkSection} 
\end{homeworkProblem}

%--------------------------------------------

\begin{homeworkProblem}[\arabic{homeworkProblemCounter} Apprentissage automatique] % Roman numerals

\begin{homeworkSection}{Comparaison des résultats} 
    Au niveau des résultats, nous pouvons voir que la régression linéaire nous
fournit un modèle correcte, le modèle de classification naïve bayésienne nous fournit un modèle non pertinent car il considère
plus de 30\% des mails comme spam alors qu'ils ne le sont pas. Et le modèle de forêts d'arbres décisionnels nous donne le
meilleur résultat.  C'est donc cette méhodes qui semblent donner les meilleures performances pour le jeu de données spambase
\end{homeworkSection}

\begin{homeworkSection}{Avantage et inconvénient d'un modèle non supervisé} 
\end{homeworkSection}

\begin{homeworkSection}{Amélioration de la performance} 
\end{homeworkSection}


\end{homeworkProblem}

\end{document}
